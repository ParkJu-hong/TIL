# CORS(Cross Origin Resource Sharing)
### 다른 출처간에 리소스를 공유할 수 있도록 하는 것
출처는 웹사이트 api주소, 리소스는 주고받아지는 데이터.
서로다른 출처끼리 요청을 주고받는 걸 되게하는 것을 CORS.

요청을 받는 백엔드쪽에서 이걸 허락할 다른 출처들 미리 명시해두면 된다.
express cors옵션을 사용해서 *와일드카드를 사용하면 출처모두 허용..
ex)
```js
const cors = require('cors');
app.use(cors());
```

어디서는 요청이 되고, 어디서는 요청이 안된다. 웹사이트, 브라우저(크롬)에서 나타나는 오류다.

착한닷컴에서 받은 토큰으로 사용자가 로그인을 할때에, 만약 나쁜닷컴으로 요청이 가서 나쁜닷컴이
그 토큰을 가지고 착한닷컴에 가서 토큰으로 사용자의 정보를 빼올 수 있다.

그래서 cors라는 정책을 사용해 허용된 출처외에는 요청을 할 수 없도록 하게된다. 그리고
cors는 허용한 리소스를 할 수 있는 역활을 한다.

정확히 말하자면 cors는 그걸 막는 것이 아니라 SOP(Same-Origin-Policy), 동일 출처정책이 막는 것임

cors오류가 시뻘겉게 뜨는 이유는 대부분 '이게 되게하려면 cors란거를 허용해주던가 해라'라는 뜻임


Header => 데이터가 다른 곳으로 전달될때 맨 앞에붙는 보충정보
받는 쪽의 ip주소, 사용할 프로토콜이나 옵션이 담김(우편으로 치자면 봉투에 적힌 내용 )

origin => 요청하는 쪽의 scheme(요청할 자원에 접근할 방법)와 도메인, 포트가 담김
scheme => (요청할 자원에 접근할 방법) http, https, ftp, telnet등을 말함 // 프로토콜이나

크롬 CORS가 이 요청을 한 출처와 응답을 해출 출처의 ORIGIN을 보고 같다면 오케이해준다

## ORIGIN에서 보낸 출처값이 서버의 답장 헤더에 담긴 Access-Control-Allow-Origin에 똑같이 있으면 안전한 요청으로 간주하고 응답 데이터를 받아오게 됌


그리고 토큰등 사용자 식별 정보가 담긴 요청에 대해서는 보다 엄격함
일단 보내는 측에서는 요청의 옵션에 credentials항목을 true로 세팅해야하고
받는 쪽에서도 아무 출처나 다 된다는 와일드 카드가 아니라 보내는 쪽의 출처 - 웹페이지주소를 정확히 명시한 다음 Access-Control-Allow-Origin 항목을 true로 맞춰줘야함

브라우저의 쿠키가 나쁘게 쓰일 수 있으니 클라이언트, 서버 둘다 빡세게 조건을 갖춰놔야함

## 방금얘기한 조건들은 Simple Request라고 get, update에서만 사용하고 put, delete등 이와 다른 요청들은 본 요청을 보내기전에 Preflight 요청이란 걸 먼저 보내서 본 요청이 안전한지 확인하고 여기서 허락이 떨어져서 본격적으로 요청을 보낼 수 있음
